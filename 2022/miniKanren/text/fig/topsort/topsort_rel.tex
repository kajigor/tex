\begin{figure}[!t]
  \centering
  \begin{minipage}{0.49\textwidth}
    \begin{lstlisting}[label={topsort_rel}, caption={Relational intepreter for topologic sort of a graph}, captionpos=b, frame=tb]
let topsort$^o$ graph numbering r =
  let rec topsort$^o$ graph numbering n r = conde [
    (graph === [] /\ r === true);
    (fresh (b e graph')
      (graph === (b, e) : graph' /\
      (fresh (x nb ne)
        (lookup$^o$ numbering b nb /\
         lookup$^o$ numbering e ne /\
         less$^o$ nb ne x /\
         conde [
          (x === false /\ r === false);
          (fresh (y)
            (x === true /\
             less$^o$ ne n y /\
             conde [
              (y === false /\ r === false);
              (y === true  /\
               topsort$^o$ graph' numbering n r)
             ]))]))))] in
  (fresh (n n')
    (n' === s n /\ numberOfNodes$^o$ graph n
     /\ topsort$^o$ graph numbering n' r))
    \end{lstlisting}
  \end{minipage}
\end{figure}
