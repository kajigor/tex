\begin{figure}[!t]
  \centering
  \begin{minipage}{\columnwidth}
    \begin{lstlisting}[label={add},
                      %  caption={Addition relation},
                       captionpos=b,
                       frame=tb]
let rec add$^o$ (x, g->g) (y, g->g) (z, f->g) = conde [
  ((x, g->g)  === O /\ (y, g->g) === (z, f->g));
  (((x, g->g) === S (x', f->?) /\
    add$^o$ (x', f->?) (y, g->g) (z', f->?) /\
    (z,f->g) === S (z', f->?))) ]
    \end{lstlisting}
  \end{minipage}
\end{figure}